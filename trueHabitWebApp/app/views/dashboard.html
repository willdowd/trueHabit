
<div class="container">
    <div class="row row-content-no-border">
        

        <div class="col-sm-12 col-md-9">
            <div class="card">
                <!-- Main card block -start-  with the habits and dates -->
                <div class="card-block">
                    <div class="row ">
                        <div class="col-xs-6">
                            <button type="button" class="btn btn-default btn-outline" ng-click="openAddHabit()">
                            <span class="glyphicon glyphicon-plus"
                         aria-hidden="true"></span>
                         <!-- <a ui-sref="app" title="My Tooltip!" data-toggle="tooltip" data-placement="top" tooltip>
                         My Tooltip Link</a> -->
                         add new habit
                            </button>
                        </div>
                        <div class="col-xs-6">
                            <p id="monthIndicator"> {{viewDate | date: 'MMM yyyy'}} </p>
                        </div>
                    </div>


                    <div class="row">
                    <div class="alert alert-warning alert-dismissable" ng-show="lastWeekWarning" >
                        <strong>Warning!</strong> You can't go back so far in time. This app didn't exist yet!
                    </div>

                    <div class="col-xs-12 col-sm-3">
                        
                        <div class="row row-week-days center-block text-center">
                                
                                <div class="btn-group" role="group" aria-label="Basic example">
                                    <button type="button" class="btn btn-xs btn-secondary" ng-click="previousWeek()">
                                        <span class="glyphicon glyphicon-menu-left"
                                            aria-hidden="true"></span>
                                    </button>
                                    <button type="button" class="btn btn-xs btn-secondary" ng-click="todaysWeek()">TODAY</button>
                                    <button type="button" class="btn btn-xs btn-secondary" ng-click="nextWeek()">
                                        <span class="glyphicon glyphicon-menu-right"
                                            aria-hidden="true"></span>
                                    </button>
                                </div>
                            <!-- </div> -->
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-9">
                        <div class="row row-week-days">
                            <div class="col-xs-12">

                            </div>
                            <div class="col-xs-4">
                                <div class="row">
                                    <div class="col-xs-4"></div> <!-- this column empty -->
                                    <div class="col-xs-4 text-center" ng-class="{'special-day': isItToday(0) }"> M </div>
                                    <div class="col-xs-4 text-center" ng-class="{'special-day': isItToday(1) }"> T </div>
                                </div>
                            </div>

                            <div class="col-xs-8">
                                <div class="row">
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(2) }"> W </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(3) }"> T </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(4) }"> F </div>
                                    <!-- <div class="col-xs-2 text-center" ng-class="{'special-day': {{isSaturday}} }"> S </ -->
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(5) }"> S</div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(6) }"> S </div>
                                    <div class="col-xs-2"></div> <!-- this column empty -->
                                </div>
                            </div>
                            <div class="col-xs-4">
                                <div class="row">
                                    <div class="col-xs-4"></div> <!-- this column empty -->
                                    <div class="col-xs-4 text-center" ng-class="{'special-day': isItToday(0) }"> {{displayDateArray[0]}} </div>
                                    <div class="col-xs-4 text-center" ng-class="{'special-day': isItToday(1) }"> {{displayDateArray[1]}} </div>
                                </div>
                            </div>

                            <div class="col-xs-8">
                                <div class="row">
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(2) }"> {{displayDateArray[2]}} </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(3) }"> {{displayDateArray[3]}} </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(4) }"> {{displayDateArray[4]}} </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(5) }"> {{displayDateArray[5]}} </div>
                                    <div class="col-xs-2 text-center" ng-class="{'special-day': isItToday(6) }"> {{displayDateArray[6]}} </div>
                                    <div class="col-xs-2"></div> <!-- this column empty -->
                                </div>
                            </div>
                        </div>
                    </div>

                    </div> <!-- div class row - for Week days and Week change buttons -->



                    <div class="row row-content-no-border">

                            <ul>
                                <li id="listOfHabits" ng-repeat="habit in allHabits">

                                <div class="row row-habit">

                                    <div class="col-xs-12 col-sm-3">

                                        <div class="col-xs-4 col-sm-9">
                                            <div class="btn-group" role="group" aria-label="Basic example">
                                                <button type="button" class="btn btn-xs btn-secondary" ng-click="removeHabit(habit._id)">
                                                    <span class="glyphicon glyphicon-trash"
                                                        aria-hidden="true"></span>
                                                </button>
                                                <button type="button" class="btn btn-xs btn-secondary" ng-click="resetHabit(habit._id)">
                                                    <span class="glyphicon glyphicon-remove-circle"
                                                        aria-hidden="true"></span>
                                                </button>
                                                <button type="button" class="btn btn-xs btn-secondary" ng-click="viewStatistics(habit._id)">
                                                    <span class="glyphicon glyphicon-stats"
                                                        aria-hidden="true"></span>
                                                </button>
                                            </div>

                                        </div>
                                        <div class="col-xs-8 col-sm-3">
                                            <h3 id="habitNameTitle">{{habit.name}}</h3>
                                        </div>




                                    </div>

                                    <div class="col-xs-12 col-sm-9">


                                        <div class="col-xs-4">
                                            <div class="row">
                                                <div class="col-xs-4"></div> <!-- this column empty -->

                                                <div class="col-xs-4 text-center" 
                                                ng-if="isDayPerf(habit._id,0)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,0), 'isnotdone': !isdone(habit._id, 0), 'isdisabled': isButtonDisabled(0)}" 
                                                    ng-click="switchState(habit._id, 0)"
                                                    ng-disabled="{{isButtonDisabled(0)}}"
                                                            >{{isDayPerf(habit._id,0)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-4 text-center" 
                                                ng-if="!isDayPerf(habit._id,0)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,0), 'isnotdone': !isdone(habit._id, 0), 'isdisabled': isButtonDisabled(0)}" 
                                                    ng-click="switchState(habit._id, 0)"
                                                    ng-disabled="{{isButtonDisabled(0)}}">{{isDayPerf(habit._id,0)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-4 text-center" 
                                                ng-if="isDayPerf(habit._id,1)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,1), 'isnotdone': !isdone(habit._id, 1), 'isdisabled': isButtonDisabled(1)}"  
                                                    ng-click="switchState(habit._id, 1)"
                                                    ng-disabled="{{isButtonDisabled(1)}}">{{isDayPerf(habit._id,1)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-4 text-center" 
                                                ng-if="!isDayPerf(habit._id,1)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,1), 'isnotdone': !isdone(habit._id, 1), 'isdisabled': isButtonDisabled(1)}"  
                                                    ng-click="switchState(habit._id, 1)"
                                                    ng-disabled="{{isButtonDisabled(1)}}">{{isDayPerf(habit._id,1)}}
                                                    </button>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-xs-8">
                                            <div class="row">

                                                <div class="col-xs-2 text-center" 
                                                ng-if="isDayPerf(habit._id,2)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,2), 'isnotdone': !isdone(habit._id, 2), 'isdisabled': isButtonDisabled(2)}"
                                                    ng-click="switchState(habit._id, 2)"
                                                    ng-disabled="{{isButtonDisabled(2)}}">{{isDayPerf(habit._id,2)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-2 text-center" 
                                                ng-if="!isDayPerf(habit._id,2)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,2), 'isnotdone': !isdone(habit._id, 2), 'isdisabled': isButtonDisabled(2)}"  
                                                    ng-click="switchState(habit._id, 2)"
                                                    ng-disabled="{{isButtonDisabled(2)}}">{{isDayPerf(habit._id,2)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-2 text-center" 
                                                ng-if="isDayPerf(habit._id,3)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,3), 'isnotdone': !isdone(habit._id, 3), 'isdisabled': isButtonDisabled(3)}"  
                                                    ng-click="switchState(habit._id, 3)"
                                                    ng-disabled="{{isButtonDisabled(3)}}">{{isDayPerf(habit._id,3)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-2 text-center" 
                                                ng-if="!isDayPerf(habit._id,3)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,3), 'isnotdone': !isdone(habit._id, 3), 'isdisabled': isButtonDisabled(3)}"  
                                                    ng-click="switchState(habit._id, 3)"
                                                    ng-disabled="{{isButtonDisabled(3)}}">{{isDayPerf(habit._id,3)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-2 text-center" 
                                                ng-if="isDayPerf(habit._id,4)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,4), 'isnotdone': !isdone(habit._id, 4), 'isdisabled': isButtonDisabled(4)}"  
                                                    ng-click="switchState(habit._id, 4)"
                                                    ng-disabled="{{isButtonDisabled(4)}}">{{isDayPerf(habit._id,4)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-2 text-center" 
                                                ng-if="!isDayPerf(habit._id,4)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,4), 'isnotdone': !isdone(habit._id, 4), 'isdisabled': isButtonDisabled(4)}"  
                                                    ng-click="switchState(habit._id, 4)"
                                                    ng-disabled="{{isButtonDisabled(4)}}">{{isDayPerf(habit._id,4)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-2 text-center" 
                                                ng-if="isDayPerf(habit._id,5)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,5), 'isnotdone': !isdone(habit._id, 5), 'isdisabled': isButtonDisabled(5)}"  
                                                    ng-click="switchState(habit._id, 5)"
                                                    ng-disabled="{{isButtonDisabled(5)}}">{{isDayPerf(habit._id,5)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-2 text-center" 
                                                ng-if="!isDayPerf(habit._id,5)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,5), 'isnotdone': !isdone(habit._id, 5), 'isdisabled': isButtonDisabled(5)}"  
                                                    ng-click="switchState(habit._id, 5)"
                                                    ng-disabled="{{isButtonDisabled(5)}}">{{isDayPerf(habit._id,5)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-2 text-center" 
                                                ng-if="isDayPerf(habit._id,6)">
                                                    <button class="btn btn-success btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,6), 'isnotdone': !isdone(habit._id, 6), 'isdisabled': isButtonDisabled(6)}"  
                                                    ng-click="switchState(habit._id, 6)"
                                                    ng-disabled="{{isButtonDisabled(6)}}">{{isDayPerf(habit._id,6)}}
                                                    </button>
                                                </div>
                                                <div class="col-xs-2 text-center" 
                                                ng-if="!isDayPerf(habit._id,6)">
                                                    <button class="btn btn-danger btn-circle btn-md" 
                                                    ng-class="{'isdone': isdone(habit._id,6), 'isnotdone': !isdone(habit._id, 6), 'isdisabled': isButtonDisabled(6)}"  
                                                    ng-click="switchState(habit._id, 6)"
                                                    ng-disabled="{{isButtonDisabled(6)}}">{{isDayPerf(habit._id,6)}}
                                                    </button>
                                                </div>

                                                <div class="col-xs-2"></div> <!-- this column empty -->
                                            </div>
                                        </div>
                                    </div> <!-- div class row - for Week days and Week change buttons -->

                                </div>
                                </li>
                            </ul>

                            </div>                            

            </div>
                <!-- Main card block -end -->
        </div>
        </div>


        <div class="col-sm-12 col-md-3">
            <div class="card">
                <div class="card-block">
                    
                    <div class="row text-center row-content">
                        <h3 class="dashboard-title">Weekly Score</h3>
                        <h4>{{weeklyScore.score}} / {{weeklyScore.maxScore}}</h4>
                    
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped" role="progressbar" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100" style="width: {{weeklyScore.completion}}%">
                                <span class="sr-only">{{weeklyScore.completion}}% Complete</span>
                            </div>
                        </div>
                    </div>

                    <div class="row text-center row-content">
                        <h3 class="dashboard-title">Current Streaks</h3>
                        <ul>
                            <li id="listOfHabits" ng-repeat="habit in allHabits | orderBy:'-currentstreak'">
                                <h4>{{habit.name}}: {{getCurrentStreak(habit._id)}}</h4>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>

    </div>

</div>

